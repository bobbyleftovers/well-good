(function(t){function e(e){for(var r,s,a=e[0],c=e[1],l=e[2],p=0,_=[];p<a.length;p++)s=a[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&_.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(_.length)_.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},o={importer:0},i=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/wp-content/plugins/wg-redirections/dist/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("ee5c")},"46ec":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"logs",staticClass:"wg-redirections__logs",domProps:{innerHTML:t._s(t.logs)}})},o=[],i=(n("99af"),{data:function(){return{logs:""}},watch:{json:function(){this.importReady()}},methods:{reset:function(){this.logs=""},success:function(t){this.new(t,"success")},error:function(t){this.new(t,"error")},warning:function(t){this.new(t,"warning")},new:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black";switch(n){case"error":n="red";break;case"warning":n="orange";break;case"success":n="green";break}this.logs+='<span style="color:'.concat(n,';">').concat(t,"</span><br>"),this.$nextTick((function(){e.$refs.logs.scrollTop=e.$refs.logs.scrollHeight}))}}}),s=i,a=(n("bbad"),n("2877")),c=Object(a["a"])(s,r,o,!1,null,"639c4598",null);e["a"]=c.exports},"659a":function(t,e,n){"use strict";var r=n("6699"),o=n.n(r);o.a},6699:function(t,e,n){},b107:function(t,e,n){},bbad:function(t,e,n){"use strict";var r=n("dab0"),o=n.n(r);o.a},cad3:function(t,e,n){},d837:function(t,e,n){"use strict";var r=n("cad3"),o=n.n(r);o.a},dab0:function(t,e,n){},ee5c:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"poststuff"}},[n("input-csv",{on:{input:t.onCSVLoaded}}),n("json-importer",{attrs:{json:t.json}})],1)},i=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-csv"},[t._m(0),t._m(1),t._m(2),t._m(3),n("input",{ref:"input",attrs:{id:"csv",type:"file"},on:{change:t.readFile}})])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("strong",[t._v("Import local CSV. File should contain the following fields")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-csv__info"},[n("pre",[t._v("redirect_from")]),t._v(" "),n("small",[t._v("(mandatory)")]),n("br"),n("pre",[t._v("redirect_to")]),t._v(" "),n("small",[t._v("(optional, will default to home page)")]),n("br")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("strong",[t._v("Other optional fields:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-csv__info"},[n("pre",[t._v("http_response")]),t._v(" "),n("small",[t._v("(default: 301)")]),n("br"),n("pre",[t._v("skip_amp_on_redirect")]),t._v(" "),n("small",[t._v("(default: 0)")]),n("br"),n("pre",[t._v("remove_query_on_redirect")]),t._v(" "),n("small",[t._v("(default: 0)")]),n("br"),n("pre",[t._v("is_active")]),t._v(" "),n("small",[t._v("(default: 1)")]),n("br"),n("pre",[t._v("add_to_sitemap")]),t._v(" "),n("small",[t._v("(default: 0)")]),n("br"),n("pre",[t._v("type")]),t._v(" "),n("small",[t._v("['post','page','category','tag','post:cpt','taxonomy:custom_tax', 'external'] (default: null)")]),n("br")])}],c=(n("ac1f"),n("5319"),n("1276"),n("498a"),{methods:{readFile:function(){this.reader=new FileReader,this.reader.onload=this.buildJSON,this.reader.readAsBinaryString(this.$refs.input.files[0])},removeBomUtf8:function(t){return t.replace("ï»¿","")},buildJSON:function(){for(var t=this.removeBomUtf8(this.reader.result).split("\n"),e=[],n=t[0].split(","),r=1;r<t.length;r++){for(var o=t[r].split(","),i={},s=0;s<o.length;s++)n[s]&&(i[n[s].trim().replace(/['"]+/g,"")]=o[s].trim().replace(/['"]+/g,""));e.push(i)}this.$emit("input",e)}}}),l=c,u=(n("d837"),n("2877")),p=Object(u["a"])(l,s,a,!1,null,"06adc99c",null),_=p.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"json-importer"},[n("Logs",{directives:[{name:"show",rawName:"v-show",value:t.show_logs,expression:"show_logs"}],ref:"logs"}),t.is_ready?n("div",{staticClass:"json-importer__actions"},[t.is_importing?t._e():n("div",{staticClass:"button action json-importer__button",on:{click:t.startImport}},[t.show_logs?n("span",[t._v("Restart import")]):n("span",[t._v("Import")])]),!t.is_importing&&t.show_logs&&t.import_on_course?n("div",{staticClass:"button action json-importer__button",on:{click:t.continueImport}},[n("span",[t._v("Continue import")])]):t._e(),t.is_importing?n("div",{staticClass:"button action json-importer__button json-importer__stop",on:{click:t.stop}},[t._v("Stop")]):t._e()]):t._e()],1)},f=[],h=(n("99af"),n("5530")),m=n("bc3a"),v=n.n(m),g=n("4328"),b=n.n(g),w=n("46ec"),y={props:["json"],components:{Logs:w["a"]},data:function(){return{is_importing:!1,import_on_course:!1,show_logs:!1,index:0,hash:null,is_ready:!1}},watch:{json:function(){this.importReady()}},computed:{logs:function(){return this.$refs.logs}},methods:{stop:function(){this.is_importing=!1},importReady:function(){this.is_importing=!1,this.show_logs=!1,this.is_ready=!0},startImport:function(){this.index=0,this.logs.reset(),this.import_on_course=!0,this.hash=Date.now(),this.is_importing=this.hash,this.show_logs=!0,this.logs.success("Starting import..."),this.importRow(this.hash)},continueImport:function(){this.hash=Date.now(),this.is_importing=this.hash,this.importRow(this.hash)},endImport:function(){this.is_importing=!1,this.import_on_course=!1,this.logs.success("Import finished")},importRow:function(t){var e=this;if(this.is_importing&&this.is_importing===t){var n=Object(h["a"])({action:"wg_redirections_new_redirection",is_active:1,_wpnonce:window.wg_redirections._wpnonce},this.json[this.index]),r=JSON.stringify(this.json[this.index]);v.a.post(window.ajaxurl,b.a.stringify(n)).then((function(n){"string"===typeof n.data?e.logs.error("Error! Cannot import ".concat(r,". ").concat(n.data)):n.data.error?e.logs.error("Error! Cannot import ".concat(r,". ").concat(n.data.error)):e.logs.new("Imported "+r),e.index++,e.is_importing?e.index>=e.json.length?e.endImport():e.importRow(t):e.logs.warning("Import has been stopped by the user")})).catch((function(t){e.logs.error("Error when importing ".concat(r,". ").concat(t.message))}))}}}},j=y,x=(n("659a"),Object(u["a"])(j,d,f,!1,null,"7e97a247",null)),O=x.exports,C={components:{InputCsv:_,JsonImporter:O},data:function(){return{json:!1}},methods:{onCSVLoaded:function(t){this.json=t}}},$=C,S=Object(u["a"])($,o,i,!1,null,null,null),I=S.exports;n("b107");r["a"].config.productionTip=!1,document.addEventListener("DOMContentLoaded",(function(){return new r["a"]({render:function(t){return t(I)}}).$mount(".wg-redirections-importer")}))}});